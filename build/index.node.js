/*! For license information please see index.node.js.LICENSE.txt */
(()=>{"use strict";var e={476:(e,t,r)=>{r.d(t,{Z:()=>n});const n={RENDER:"render",SHOW_LOADER:"showLoader",RETURN_NULL:"returnNull",REDIRECT_TO_LOGIN:"redirectToLogin",REDIRECT_TO_APP:"redirectToApp"}},248:(e,t,r)=>{r.d(t,{$1:()=>s,Qm:()=>a,_n:()=>u,cJ:()=>c});var n=r(962),i=()=>(0,n.i)().cookies.name,o=()=>(0,n.i)().cookies.unified,s=()=>{var e=i();return o()?e:"".concat(e,".AuthUser")},a=()=>"".concat(s(),".sig"),u=()=>{var e=i();return o()?e:"".concat(e,".AuthUserTokens")},c=()=>"".concat(u(),".sig")},620:(e,t,r)=>{r.d(t,{Y:()=>i});var n=["aud","auth_time","email","email_verified","exp","firebase","iat","iss","name","phone_number","picture","sub","uid","user_id"],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach((r=>{n.includes(r)||(t[r]=e[r])})),t}},962:(e,t,r)=>{r.d(t,{i:()=>m,v:()=>v});var n,i=r(838),o=r.n(i),s=r(779),a=r.n(s),u=r(106),c=r(493),d=["cookies"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=12096e5,f={debug:!1,loginAPIEndpoint:void 0,logoutAPIEndpoint:void 0,onLoginRequestError:void 0,onLogoutRequestError:void 0,tokenChangedHandler:void 0,onVerifyTokenError:()=>{},onTokenRefreshError:()=>{},authPageURL:void 0,appPageURL:void 0,firebaseAdminInitConfig:void 0,firebaseClientInitConfig:void 0,firebaseAuthEmulatorHost:void 0,cookies:{name:void 0,keys:void 0,domain:void 0,httpOnly:!0,maxAge:6048e5,overwrite:!0,path:"/",sameSite:"strict",secure:!0,signed:!0,unified:!1}},g=e=>{var t=[];e.tokenChangedHandler&&(e.loginAPIEndpoint&&t.push('The "loginAPIEndpoint" setting should not be set if you are using a "tokenChangedHandler".'),e.logoutAPIEndpoint&&t.push('The "logoutAPIEndpoint" setting should not be set if you are using a "tokenChangedHandler".'),e.onLoginRequestError&&t.push('The "onLoginRequestError" setting should not be set if you are using a "tokenChangedHandler".'),e.onLogoutRequestError&&t.push('The "onLogoutRequestError" setting should not be set if you are using a "tokenChangedHandler".')),e.firebaseClientInitConfig&&e.firebaseClientInitConfig.apiKey||t.push('The "firebaseClientInitConfig.apiKey" value is required.'),e.firebaseAuthEmulatorHost&&e.firebaseAuthEmulatorHost.startsWith("http")&&t.push("The firebaseAuthEmulatorHost should be set without a prefix (e.g., localhost:9099)");var r=["function","undefined"];r.indexOf(typeof e.onVerifyTokenError)<0&&t.push('Invalid next-firebase-auth options: The "onVerifyTokenError" setting must be a function.'),r.indexOf(typeof e.onTokenRefreshError)<0&&t.push('Invalid next-firebase-auth options: The "onTokenRefreshError" setting must be a function.'),r.indexOf(typeof e.onLoginRequestError)<0&&t.push('Invalid next-firebase-auth options: The "onLoginRequestError" setting must be a function.'),r.indexOf(typeof e.onLogoutRequestError)<0&&t.push('Invalid next-firebase-auth options: The "onLogoutRequestError" setting must be a function.');var{keys:n}=e.cookies,i=n&&n.length&&(!n.filter||n.filter((e=>void 0!==e)).length);return(0,u.Z)()?(e.tokenChangedHandler||(e.loginAPIEndpoint||t.push('The "loginAPIEndpoint" setting is required.'),e.logoutAPIEndpoint||t.push('The "logoutAPIEndpoint" setting is required.')),e.firebaseAdminInitConfig&&e.firebaseAdminInitConfig.credential&&e.firebaseAdminInitConfig.credential.privateKey&&t.push('The "firebaseAdminInitConfig" private key setting should not be available on the client side.'),i&&t.push('The "cookies.keys" setting should not be available on the client side.')):(e.cookies.name||t.push('The "cookies.name" setting is required on the server side.'),e.cookies.signed&&!i&&t.push('The "cookies.keys" setting must be set if "cookies.signed" is true.'),e.firebaseAuthEmulatorHost&&(process.env.FIREBASE_AUTH_EMULATOR_HOST?process.env.FIREBASE_AUTH_EMULATOR_HOST!==e.firebaseAuthEmulatorHost&&t.push('The "FIREBASE_AUTH_EMULATOR_HOST" environment variable should be the same as the host set in the config'):t.push('The "FIREBASE_AUTH_EMULATOR_HOST" environment variable should be set if you are using the "firebaseAuthEmulatorHost" option')),e.cookies.maxAge>p&&t.push('The "cookies.maxAge" setting must be less than two weeks ('.concat(p," ms)."))),{isValid:0===t.length,errors:t}},y=e=>h(h({},e),{},{cookies:h(h({},e.cookies),{},{keys:["hidden"]})},e.firebaseAdminInitConfig&&{firebaseAdminInitConfig:h(h({},e.firebaseAdminInitConfig),e.firebaseAdminInitConfig.credential&&{credential:h(h({},e.firebaseAdminInitConfig.credential),{},{privateKey:"hidden",clientEmail:"hidden"})})}),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.Z)("Setting config with provided value:",y(e));var{cookies:t={}}=e,r=o()(e,d),i=h(h(h({},f),r),{},{cookies:h(h(h({},f.cookies),t),{},{signed:!t.unified&&t.signed})}),{isValid:s,errors:a}=g(i);if(!s)throw new Error("Invalid next-firebase-auth options: ".concat(a.join(" ")));n=i},m=()=>{if(!n)throw new Error("next-firebase-auth must be initialized before rendering.");return n}},321:(e,t,r)=>{r.d(t,{kT:()=>d,ej:()=>u,d8:()=>c});var n=r(933),i=r.n(n),o=e=>{var t=Buffer.from(e,"base64").toString("utf8");return JSON.parse(t)},s=e=>{var t=JSON.stringify(e);return Buffer.from(t).toString("base64")},a=function(e){var{req:t,res:r}=e,{keys:n,secure:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i()(t,r,{keys:n,secure:o});return s},u=function(e,t){var{req:r,res:n}=t,{keys:i,secure:s,signed:u}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(u&&!i)throw new Error('The "keys" value must be provided when using signed cookies.');if(!r)throw new Error('The "req" argument is required when calling `getCookie`.');var c=a({req:r,res:n},{keys:i,secure:s}),d=c.get(e,{signed:u});return d?o(d):void 0},c=function(e,t,r){var{req:n,res:i}=r,{keys:o,domain:u,httpOnly:c,maxAge:d,overwrite:l,path:h,sameSite:p,secure:f,signed:g}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(g&&!o)throw new Error('The "keys" value must be provided when using signed cookies.');if(!i)throw new Error('The "res" argument is required when calling `setCookie`.');var y=a({req:n,res:i},{keys:o,secure:f}),v=null==t?void 0:s(t);y.set(e,v,{domain:u,httpOnly:c,maxAge:d,overwrite:l,path:h,sameSite:p,secure:f,signed:g})},d=(e,t,r)=>{c(e,void 0,t,r)}},834:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(779),i=r.n(n),o=r(591),s=r.n(o),a=r(106),u=r(620);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const l=function(){var{firebaseUserClientSDK:e,firebaseUserAdminSDK:t,serializedAuthUser:n,clientInitialized:i=!1,token:o=null,claims:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=[e,t,n].reduce(((e,t)=>t?e+1:e),0);if(l>1)throw new Error('createAuthUser cannot receive more than one of the following properties: "firebaseUserClientSDK", "firebaseUserAdminSDK", "serializedAuthUser"');if(i&&(t||n))throw new Error('The "clientInitialized" value can only be true when called with the "firebaseUserClientSDK" property or no user.');if(c&&(t||n))throw new Error('The "claims" value can only be set in conjunction with the "firebaseUserClientSDK" property.');if(o&&!t)throw new Error('The "token" value can only be set if the "firebaseUserAdminSDK" property is defined.');var h={},p=null,f=null,g=!1,y=null,v=null,m=null,b=function(){var e=s()((function*(){return null}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=s()((function*(){}));return function(){return e.apply(this,arguments)}}(),k=null;if(e){if((0,a.Z)()){var{getApp:w}=r(324),{getAuth:E,signOut:A}=r(610);O=function(){var e=s()((function*(){return A(E(w()))}));return function(){return e.apply(this,arguments)}}()}h=(0,u.Y)(c),p=e.uid,f=e.email,g=e.emailVerified,y=e.phoneNumber,v=e.displayName,m=e.photoURL,b=function(){var t=s()((function*(t){return e.getIdToken(t)}));return function(e){return t.apply(this,arguments)}}(),k=null}else if(t)h=(0,u.Y)(t),p=t.uid,f=t.email,g=t.email_verified,y=t.phone_number,v=t.name,m=t.picture,b=function(){var e=s()((function*(){return o}));return function(){return e.apply(this,arguments)}}(),k=o;else if(n){var T=JSON.parse(n);h=T.claims,p=T.id,f=T.email,g=T.emailVerified,y=T.phoneNumber,v=T.displayName,m=T.photoURL,b=function(){var e=s()((function*(){return T._token||null}));return function(){return e.apply(this,arguments)}}(),k=T._token}return{id:p,email:f,emailVerified:g,phoneNumber:y,displayName:v,photoURL:m,claims:h,getIdToken:b,clientInitialized:i,firebaseUser:e||null,signOut:O,serialize:function(){var{includeToken:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(d({id:p,claims:h,email:f,emailVerified:g,phoneNumber:y,displayName:v,photoURL:m,clientInitialized:i},e&&{_token:k}))}}}},891:(e,t,r)=>{r.d(t,{_:()=>h,y:()=>l});var n=r(591),i=r.n(n),o=r(860),s=r(834),a=r(962),u=()=>process.env.FIREBASE_AUTH_EMULATOR_HOST?"http://".concat(process.env.FIREBASE_AUTH_EMULATOR_HOST,"/"):"https://",c=()=>(0,a.i)().firebaseClientInitConfig.apiKey,d=function(){var e=i()((function*(e){if(!e)throw new Error('The "refreshToken" argument is required.');var t=c(),r="".concat(u(),"securetoken.googleapis.com/v1/token?key=").concat(t),n=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=refresh_token&refresh_token=".concat(e)}),i=yield n.json();if(!n.ok)throw new Error("Problem refreshing token: ".concat(JSON.stringify(i)));return i.id_token}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=i()((function*(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e,i=(0,o.Z)(),{onTokenRefreshError:u,onVerifyTokenError:c}=(0,a.i)();try{t=yield i.auth().verifyIdToken(e)}catch(e){switch(e.code){case"auth/invalid-user-token":case"auth/user-token-expired":case"auth/user-disabled":n=null,t=null;break;case"auth/id-token-expired":case"auth/argument-error":if(r){var l=!1;try{n=yield d(r)}catch(e){l=!0,yield u(e)}if(!l)try{t=yield i.auth().verifyIdToken(n)}catch(e){yield c(e)}l&&(n=null,t=null)}else n=null,t=null;break;default:n=null,t=null,yield c(e)}}var h=(0,s.Z)({firebaseUserAdminSDK:t,token:n});return h}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=i()((function*(e){var t=yield l(e),r=(0,o.Z)(),n=yield r.auth().createCustomToken(t.id),i=c(),s="".concat(u(),"identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=").concat(i),a=yield fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,returnSecureToken:!0})}),d=yield a.json();if(!a.ok)throw new Error("Problem getting a refresh token: ".concat(JSON.stringify(d)));var{idToken:h,refreshToken:p}=d;return{idToken:h,refreshToken:p,AuthUser:t}}));return function(t){return e.apply(this,arguments)}}()},741:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(591),i=r.n(n),o=r(834),s=r(321),a=r(891),u=r(248),c=r(962);const d=function(){var e=i()((function*(e){var t,{req:r,includeToken:n=!0,authCookieValue:i,authCookieSigValue:d}=e,{keys:l,secure:h,signed:p,unified:f}=(0,c.i)().cookies,g=r;if(!r){if(!i)throw new Error('Either "req" or "authCookieValue" must be provided.');var y=n?(0,u._n)():(0,u.$1)(),v=n?(0,u.cJ)():(0,u.Qm)(),m=d?"".concat(v,"=").concat(d,";"):"";g={headers:{cookie:"".concat(y,"=").concat(i,";").concat(d?" ".concat(m):"")}}}if(n){var b=(0,s.ej)((0,u._n)(),{req:g},{keys:l,secure:h,signed:p});f&&b&&(b=b.split("|-|")[0]);var{idToken:O,refreshToken:k}=b?JSON.parse(b):{};t=O?yield(0,a.y)(O,k):(0,o.Z)()}else{if(!p)throw new Error("Cookies must be signed when using withAuthUserSSR.");var w=(0,s.ej)((0,u.$1)(),{req:g},{keys:l,secure:h,signed:p});f&&w&&(w=w.split("|-|")[1]),t=(0,o.Z)({serializedAuthUser:w})}return t}));return function(t){return e.apply(this,arguments)}}()},860:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(779),i=r.n(n);const o=require("firebase-admin");var s=r(962);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const c=()=>{if(!o.apps.length){var{firebaseAdminInitConfig:e,useFirebaseAdminDefaultCredential:t}=(0,s.i)();if(!e&&!t)throw new Error('Missing firebase-admin credentials in next-firebase-auth. Set "firebaseAdminInitConfig", "useFirebaseAdminDefaultCredential", or initialize firebase-admin yourself.');o.initializeApp(u(u({},e),{},{credential:t?o.credential.applicationDefault():o.credential.cert(u({},e.credential))}))}return o}},106:(e,t,r)=>{r.d(t,{Z:()=>n});const n=()=>"undefined"!=typeof window},493:(e,t,r)=>{r.d(t,{Z:()=>s,y:()=>o});var n=r(106),i=!1,o=e=>{i=e};const s=function(){if(i){for(var e=(0,n.Z)()?["%cnext-firebase-auth","background: #ffa000; color: #fff; border-radius: 2px; padding: 2px 6px"]:["next-firebase-auth:"],t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];console.log(...e,...r)}}},737:(e,t,r)=>{r.d(t,{U:()=>l,j:()=>h});var n=r(779),i=r.n(n),o=r(962);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={basePath:!0,permanent:!1},c=e=>{var{ctx:t,AuthUser:r,redirectDestination:n}=e;if("function"==typeof n){var i=n({ctx:t,AuthUser:r});return c({ctx:t,AuthUser:r,redirectDestination:i})}return"string"==typeof n?a(a({},u),{},{destination:n}):"object"==typeof n?a(a({},u),n):null},d=e=>{var{redirectConfigName:t,redirectURL:r,ctx:n,AuthUser:i}=e;return((e,t)=>{if(!t||"string"!=typeof t&&!("destination"in t))throw new Error('The "'.concat(e,'" must be set to a non-empty string, an object literal containing "destination", or a function that returns either.'));return t})(t,c({ctx:n,AuthUser:i,redirectDestination:r||(0,o.i)()[t]}))},l=e=>{var{redirectURL:t,AuthUser:r,ctx:n}=e;return d({redirectConfigName:"authPageURL",redirectURL:t,AuthUser:r,ctx:n})},h=e=>{var{redirectURL:t,AuthUser:r,ctx:n}=e;return d({redirectConfigName:"appPageURL",redirectURL:t,AuthUser:r,ctx:n})}},343:(e,t,r)=>{r.r(t),r.d(t,{AuthUserContext:()=>i,default:()=>o});var n=r(689),i=(0,n.createContext)();const o=()=>{var e=(0,n.useContext)(i);if(!e)throw new Error("When using `useAuthUser`, the page must be wrapped in `withAuthUser`.");return e}},81:(e,t,r)=>{r.d(t,{Z:()=>U});var n=r(838),i=r.n(n),o=r(679),s=r.n(o),a="MODULE_NOT_FOUND",u=r(834),c=r(779),d=r.n(c),l=r(591),h=r.n(l),p=r(689),f=r(324),g=r(610),y=r(962),v=r(620),m=r(493);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=function(){var e=h()((function*(e){var t,{loginAPIEndpoint:r,logoutAPIEndpoint:n,onLoginRequestError:i,onLogoutRequestError:o}=(0,y.i)();if(e.id){var s=yield e.getIdToken();if(!(t=yield fetch(r,{method:"POST",headers:{Authorization:s},credentials:"include"})).ok){var a=yield t.json(),u=new Error("Received ".concat(t.status," response from login API endpoint: ").concat(JSON.stringify(a)));if(!i)throw u;yield i(u)}}else if(!(t=yield fetch(n,{method:"POST",credentials:"include"})).ok){var c=yield t.json(),d=new Error("Received ".concat(t.status," response from logout API endpoint: ").concat(JSON.stringify(c)));if(!o)throw d;yield o(d)}return t}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=h()((function*(e){var{tokenChangedHandler:t}=(0,y.i)(),r=(0,u.Z)({firebaseUserClientSDK:e,clientInitialized:!0});return t?t(r):k(r)}));return function(t){return e.apply(this,arguments)}}();const E=()=>{var[e,t]=(0,p.useState)({user:void 0,claims:{},initialized:!1}),[r,n]=(0,p.useState)(!1);return(0,p.useEffect)((()=>{var e=!1,r=function(){var r=h()((function*(r){(0,m.Z)("Firebase ID token changed. Firebase user:",r),n(!1);var i={};if(r){var o=yield(0,g.getIdTokenResult)(r);i=(0,v.Y)(o.claims)}t({user:r,claims:i,initialized:!0}),(0,m.Z)("Starting auth API request via tokenChangedHandler."),yield w(r),e?(0,m.Z)("Component unmounted before completing auth API request via tokenChangedHandler."):(n(!0),(0,m.Z)("Completed auth API request via tokenChangedHandler."))}));return function(e){return r.apply(this,arguments)}}(),i=(0,g.onIdTokenChanged)((0,g.getAuth)((0,f.getApp)()),r);return()=>{i(),e=!0}}),[]),O(O({},e),{},{authRequestCompleted:r})};var A=r(476),T=r(106),P=r(737),R=["AuthUserSerialized"];const U=function(){var{whenAuthed:e=A.Z.RENDER,whenUnauthedBeforeInit:t=A.Z.RENDER,whenUnauthedAfterInit:n=A.Z.RENDER,whenAuthedBeforeRedirect:o=A.Z.RETURN_NULL,appPageURL:c=null,authPageURL:d=null,LoaderComponent:l=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h=>{var p,f,g,y,v,b;try{p=r(689),({useEffect:f,useCallback:g,useMemo:y}=r(689)),({useRouter:v}=r(853)),({AuthUserContext:b}=r(343))}catch(e){throw e.code===a?new Error('The dependencies "react" and "next" are required when calling `withAuthUser`.'):e}var O=r=>{var{AuthUserSerialized:s}=r,a=i()(r,R),O=y((()=>(0,u.Z)({serializedAuthUser:s})),[s]),{user:k,claims:w,initialized:U,authRequestCompleted:S}=E(),j=y((()=>(0,u.Z)({firebaseUserClientSDK:k,clientInitialized:U,claims:w})),[k,U,w]),x=U?j:O,C=!!x.id,I=x.clientInitialized,D=C&&e===A.Z.REDIRECT_TO_APP,_=D&&T.Z&&S,q=!C&&(!I&&t===A.Z.REDIRECT_TO_LOGIN||I&&n===A.Z.REDIRECT_TO_LOGIN),L=q&&T.Z&&(t===A.Z.REDIRECT_TO_LOGIN||S),Z=v(),N=g((e=>{var{basePath:t,destination:r}=e;!1===t?window.location.replace(r):Z.replace(r)}),[Z]),H=g((()=>{(0,m.Z)("Redirecting to app.");var e=(0,P.j)({AuthUser:x,redirectURL:c});N(e)}),[x,N]),z=g((()=>{(0,m.Z)("Redirecting to login.");var e=(0,P.U)({AuthUser:x,redirectURL:d});N(e)}),[x,N]);f((()=>{(0,T.Z)()&&(_?H():L&&z())}),[_,L,H,z]);var F,K=l?p.createElement(l,null):null,M=p.createElement(b.Provider,{value:x},p.createElement(h,a));return F=D?o===A.Z.RENDER?M:o===A.Z.SHOW_LOADER?K:null:q?t===A.Z.RETURN_NULL?null:t===A.Z.SHOW_LOADER?K:M:C||S?M:t===A.Z.SHOW_LOADER?K:t===A.Z.RETURN_NULL?null:M,(0,m.Z)("AuthUser set to:",x),F};return O.displayName="WithAuthUserHOC",s()(O,h),O}}},545:(e,t,r)=>{r.d(t,{Z:()=>h});var n=r(779),i=r.n(n),o=r(591),s=r.n(o),a=r(741),u=r(476),c=r(737);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const h=function(){var{whenAuthed:e=u.Z.RENDER,whenUnauthed:t=u.Z.RENDER,appPageURL:r=null,authPageURL:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{useToken:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o=>function(){var d=s()((function*(s){var{req:d}=s,h=yield(0,a.Z)({req:d,includeToken:i}),p=h.serialize();if(!h.id&&t===u.Z.REDIRECT_TO_LOGIN)return{redirect:(0,c.U)({ctx:s,AuthUser:h,redirectURL:n})};if(h.id&&e===u.Z.REDIRECT_TO_APP)return{redirect:(0,c.j)({ctx:s,AuthUser:h,redirectURL:r})};var f={props:{AuthUserSerialized:p}};if(o){s.AuthUser=h;var g=(yield o(s))||{};g&&(g.props?(f=l({},g)).props.AuthUserSerialized=p:(g.notFound||g.redirect)&&(f=l({},g)))}return f}));return function(e){return d.apply(this,arguments)}}()}},933:(e,t,r)=>{var n=r(352)("cookies"),i=r(815),o=r(685),s={},a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,u=/^(?:lax|none|strict)$/i;function c(e,t,r){if(!(this instanceof c))return new c(e,t,r);this.secure=void 0,this.request=e,this.response=t,r&&(Array.isArray(r)?(n('"keys" argument; provide using options {"keys": [...]}'),this.keys=new i(r)):r.constructor&&"Keygrip"===r.constructor.name?(n('"keys" argument; provide using options {"keys": keygrip}'),this.keys=r):(this.keys=Array.isArray(r.keys)?new i(r.keys):r.keys,this.secure=r.secure))}function d(e,t,r){if(!a.test(e))throw new TypeError("argument name is invalid");if(t&&!a.test(t))throw new TypeError("argument value is invalid");for(var e in this.name=e,this.value=t||"",r)this[e]=r[e];if(this.value||(this.expires=new Date(0),this.maxAge=null),this.path&&!a.test(this.path))throw new TypeError("option path is invalid");if(this.domain&&!a.test(this.domain))throw new TypeError("option domain is invalid");if(this.sameSite&&!0!==this.sameSite&&!u.test(this.sameSite))throw new TypeError("option sameSite is invalid")}function l(e,t){if(t.overwrite)for(var r=e.length-1;r>=0;r--)0===e[r].indexOf(t.name+"=")&&e.splice(r,1);e.push(t.toHeader())}c.prototype.get=function(e,t){var r,n,i,o,a,u,c=e+".sig",d=t&&void 0!==t.signed?t.signed:!!this.keys;if((r=this.request.headers.cookie)&&(n=r.match(function(e){return s[e]?s[e]:s[e]=new RegExp("(?:^|;) *"+e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"=([^;]*)")}(e)),n)){if(i=n[1],!t||!d)return i;if(o=this.get(c)){if(a=e+"="+i,!this.keys)throw new Error(".keys required for signed cookies");if(!((u=this.keys.index(a,o))<0))return u&&this.set(c,this.keys.sign(a),{signed:!1}),i;this.set(c,null,{path:"/",signed:!1})}}},c.prototype.set=function(e,t,r){var i=this.response,s=this.request,a=i.getHeader("Set-Cookie")||[],u=void 0!==this.secure?!!this.secure:"https"===s.protocol||s.connection.encrypted,c=new d(e,t,r),h=r&&void 0!==r.signed?r.signed:!!this.keys;if("string"==typeof a&&(a=[a]),!u&&r&&r.secure)throw new Error("Cannot send secure cookie over unencrypted connection");if(c.secure=r&&void 0!==r.secure?r.secure:u,r&&"secureProxy"in r&&(n('"secureProxy" option; use "secure" option, provide "secure" to constructor if needed'),c.secure=r.secureProxy),l(a,c),r&&h){if(!this.keys)throw new Error(".keys required for signed cookies");c.value=this.keys.sign(c.toString()),c.name+=".sig",l(a,c)}return(i.set?o.OutgoingMessage.prototype.setHeader:i.setHeader).call(i,"Set-Cookie",a),this},d.prototype.path="/",d.prototype.expires=void 0,d.prototype.domain=void 0,d.prototype.httpOnly=!0,d.prototype.sameSite=!1,d.prototype.secure=!1,d.prototype.overwrite=!1,d.prototype.toString=function(){return this.name+"="+this.value},d.prototype.toHeader=function(){var e=this.toString();return this.maxAge&&(this.expires=new Date(Date.now()+this.maxAge)),this.path&&(e+="; path="+this.path),this.expires&&(e+="; expires="+this.expires.toUTCString()),this.domain&&(e+="; domain="+this.domain),this.sameSite&&(e+="; samesite="+(!0===this.sameSite?"strict":this.sameSite.toLowerCase())),this.secure&&(e+="; secure"),this.httpOnly&&(e+="; httponly"),e},Object.defineProperty(d.prototype,"maxage",{configurable:!0,enumerable:!0,get:function(){return this.maxAge},set:function(e){return this.maxAge=e}}),n.property(d.prototype,"maxage",'"maxage"; use "maxAge" instead'),c.connect=c.express=function(e){return function(t,r,n){t.cookies=r.cookies=new c(t,r,{keys:e}),n()}},c.Cookie=d,e.exports=c},679:(e,t,r)=>{var n=r(469),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function u(e){return n.isMemo(e)?s:a[e.$$typeof]||i}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=s;var c=Object.defineProperty,d=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var i=p(r);i&&i!==f&&e(t,i,n)}var s=d(r);l&&(s=s.concat(l(r)));for(var a=u(t),g=u(r),y=0;y<s.length;++y){var v=s[y];if(!(o[v]||n&&n[v]||g&&g[v]||a&&a[v])){var m=h(r,v);try{c(t,v,m)}catch(e){}}}}return t}},591:e=>{e.exports=require("@babel/runtime/helpers/asyncToGenerator")},779:e=>{e.exports=require("@babel/runtime/helpers/defineProperty")},838:e=>{e.exports=require("@babel/runtime/helpers/objectWithoutProperties")},352:e=>{e.exports=require("depd")},324:e=>{e.exports=require("firebase/app")},610:e=>{e.exports=require("firebase/auth")},815:e=>{e.exports=require("keygrip")},853:e=>{e.exports=require("next/router")},689:e=>{e.exports=require("react")},469:e=>{e.exports=require("react-is")},685:e=>{e.exports=require("http")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.d(n,{default:()=>f});var e=r(962),t=r(493);var i=r(476),o=r(591),s=r.n(o),a=r(891),u=r(321),c=r(248);const d=function(){var t=s()((function*(t,r){var{token:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n||t.headers.authorization;if(!i)throw new Error('The request must have an Authorization header value, or you should explicitly provide an ID token to "setAuthCookies".');var{idToken:o,refreshToken:s,AuthUser:d}=yield(0,a._)(i),{unified:l,name:h}=(0,e.i)().cookies,p=(e=>{var{domain:t,httpOnly:r,keys:n,maxAge:i,overwrite:o,path:s,sameSite:a,secure:u,signed:c}=e;return{domain:t,httpOnly:r,keys:n,maxAge:i,overwrite:o,path:s,sameSite:a,secure:u,signed:c}})((0,e.i)().cookies);return l?(0,u.d8)(h,"".concat(JSON.stringify({idToken:o,refreshToken:s}),"|-|").concat(d.serialize({includeToken:!1})),{req:t,res:r},p):((0,u.d8)((0,c._n)(),JSON.stringify({idToken:o,refreshToken:s}),{req:t,res:r},p),(0,u.d8)((0,c.$1)(),d.serialize({includeToken:!1}),{req:t,res:r},p)),{idToken:o,refreshToken:s,AuthUser:d}}));return function(e,r){return t.apply(this,arguments)}}(),l=function(){var t=s()((function*(t,r){var n=(e=>{var{domain:t,httpOnly:r,keys:n,maxAge:i,overwrite:o,path:s,sameSite:a,secure:u,signed:c}=e;return{domain:t,httpOnly:r,keys:n,maxAge:i,overwrite:o,path:s,sameSite:a,secure:u,signed:c}})((0,e.i)().cookies);(0,u.kT)((0,c._n)(),{req:t,res:r},n),(0,u.kT)((0,c.$1)(),{req:t,res:r},n)}));return function(e,r){return t.apply(this,arguments)}}();var h=r(741),p=r(860);const f={init:r=>{(r=>{(0,t.y)(!0===r.debug),(0,e.v)(r)})(r)},withAuthUser:function(){var e=r(81).Z;return e(...arguments)},useAuthUser:function(){try{r(689)}catch(e){throw new Error('The dependency "react" is required when calling `useAuthUser`.')}var e=r(343).default;return e(...arguments)},withAuthUserSSR:e=>(0,r(545).Z)(e,{useToken:!1}),withAuthUserTokenSSR:e=>(0,r(545).Z)(e,{useToken:!0}),setAuthCookies:d,unsetAuthCookies:l,verifyIdToken:a.y,AuthAction:i.Z,getFirebaseAdmin:()=>(0,p.Z)(),getUserFromCookies:h.Z}})(),module.exports=n.default})();